##### 广告系统的发展思路



互联网广告系统发展的终极目标是“价值最大化”，广告系统价值  = 广告转化效率 * 计价机制  * 广告资源量*使用效率，我们从这四个方面来看互联网广告系统的发展

###### 广告转化效率

如何提高广告转化效率？

1. 广告设计本身。决定广告效果的第一要素是广告创意的设计，通常这不是广告系统需要考虑的问题。但随着李叫兽带着他的“科学化营销”加入百度，我们开始思考广告系统是否能“科学化”辅助广告主优化其广告营销策略。
2. 广告形式。广告形式相对成熟，通常是条幅广告、视频广告、文字链广告。值得一提的是信息流广告，信息流广告是一种新的广告形式、这种广告形式的出现得益于技术的进步。好的广告形式，能够平衡广告效果和用户体验，信息流广告就是一个正面典型。
3. 受众和广告匹配度。更专业的叫法是“定向”，核心目标是从广大受众中找到广告的目标受众。定向技术的发展可以大致分为三个阶段
   1. 第一阶段：广告主选择基于时间，地理位置、频道等产品属性的规则进行“定向”（勉强成为定向吧）
   2. 第二阶段：广告主选择基于用户个人属性、行为记录等用户数据的规则进行定向。如人口学属性定向、搜索关键词定向、上下文定向
   3. 第三阶段：广告主不需要定义明确的规则，由系统分析广告主已有目标受众，然后从供应方的用户中找到合适的受众。具体来说有两种方法
      - 重定向。广告主提供受众信息，系统从供应方找到这些受众。决定重定向效果的核心因素是广告主提供的受众和供应方受众的重合度。但随着开放式的广告系统成熟，广告主通过DSP几乎可以从全网去找这些“老顾客”。除了帮助找到老客户，重定向技术还可以做更多。
        - 个性化重定向。重定向的纵向延伸，帮助找到老客户后，我们还要针对这个老用户推送个性化的广告，是推荐他购物车里的商品？那些东西已买过需要去掉？还是要推荐类似的新商品？这都是个性化的点。这种技术类似于把站内推荐橱窗放到媒体的广告位中去。
        - 搜索重定向。重定向的横向延伸，分析广告主从搜索引擎来源流量数据，将搜索某些特定关键词的用户定向到广告主网站。（这种方式严格来说不能算重定向，跟下文的新客推荐相似，姑且算作此类吧）
      - 新客推荐：通过分析广告主提供的种子用户的信息，找到供应方受众中的类似用户。问题是look-like是个黑盒模型，“类似”这个概念难以清晰定义和量化。

###### 计价机制

怎样能够让广告主和供应方都能实现利益最大化？经济学中有一句话“价格围绕价值上下波动”，好的定价机制应当能够让价格无限逼近其价值。这引出了两个问题1如何定义广告资源的用量？2如何统计单位广告量的价值？

**广告主和供应方对广告资源用量认知不同**

- 从广告主的角度看，广告投放价值是根据其最终效果来计算的。例如卖一辆车营销成本2000元，广告展示到最终完成购买的转化率是0.1%，那么一次广告的价值就是2元。现实情况中的计算会很复杂，但其价值模型 核心原理都是按照广告最终效果反推单次广告的价值。所以CPA（Cost per Action）、甚至CPS（Cost Per Sale）的计价模式是最符合广告主的价值模型的。



- 从供应方的角度看，其更关心的是单位广告资源能产生多少收入。因此产生了CPT（Time）,CPM（Mile）的计价模型。


显然供应方和广告主的广告量的认知是不同的。必然

**单位广告资源用量的市场化定价**

让市场定价，竞价模式是目前双方都能认可的定价方式。竞价模式的核心问题是1如何让更多的需求方参与竞价2如何提供更细粒度的竞价。程序化购买很好的解决了这两个问题。



广告资源总量

一个成熟的产品广告资源总量通常是和其用户使用情况是成正比的，如用户基数的扩大，使用时长增加都会增加其广告资源。通过增加广告位、增加广告视频时长能够快速直观地带来广告资源总量的增长，但如果处理不好用户体验和广告投放的平衡，就会是饮鸩止渴结局。








- 广告转化效率： 主要体现在1、提高广告与受众的匹配度，精确投放；2、提高广告接受度，如信息流广告/植入广告。
- 定价机制：竞价广告，能够实现将广告资源分配给能够让广告资源发挥更大价值的广告主，实现单位广告资源价值的最大化。“单位” 不断细化，也导致了能够实时竞价的程序化交易广告的出现 
- 广告资源量：如何在保证一定用户体验水平的基础上，尽可能获得更多广告资源。信息流广告，植入广告的出现增加了产品的可用广告资源量

###### 广告效果的阶段

曝光-关注-理解-接受-保持-决策

###### 广告的演进

![广告演进](img/广告演进.png)

|         | 受众端形式               | 定向方式                | 收费方式       | 提升之处                                 |
| ------- | ------------------- | ------------------- | ---------- | ------------------------------------ |
| CPT广告   | 不限                  | 简单定向：时段、地理          | CPT按展示时间收费 |                                      |
| 展示量广告   | 不限                  | 简单定向：时段、地理          | CPM按照曝光量收费 | 按照曝光量收费，广告开始向“面向效果”方向进化              |
| 搜索广告    | 搜索结果页：结果列表/页面其他位置   | 中级定向：关键词            | 竞价单价+点击量   | 关键词提供更好的定向方式                         |
| 社交网络广告  | 不限                  | 简单定向：时段、地理          | 不限         | 用户在社交网络停留时间更久，适合持续曝光                 |
| 精准定向广告  | 不限                  | 高级定向：用户信息，频道定向      | 竞价单价X点击量   | 从“数量”->“质量”                          |
| 上下文广告   | 不限                  | 高级定向：页面内容、行为信息、用户信息 | 竞价单价X点击量   | 不在依赖单一的关键词，分析页面内容能够提供更多的信息来帮助定向      |
| 信息流广告   | 通常在阅读信息流中，和用户消费内容相似 | 高级定向                | 竞价单机+点击量   | 开始尝试将内容和广告融合。增强广告曝光，同时也降低了广告对用户体验的伤害 |
| 一般竞价广告  | 不限                  | 高级定向                | 竞价单价+点击量   | 能使用多种信息进行复杂定向，整合多种媒体多种广告形式。          |
| 植入式原生广告 | 融入产品内容/服务           | 高级定向                | 竞价单机+点击    | 广告和内容更加深度融合                          |
| 程序化交易广告 | 不限                  | 高级定向                | 实时竞价单价+点击  | 实时竞价，进一步提高广告效果转化效率                   |

- ​




###### 技术架构

high level

![广告系统核心框架](img/广告核心技术框架.png)

![广告技术架构](img/广告技术架构.png)

- 广告投放引擎
  - 广告投放机
  - 广告检索
  - 广告排序
  - 收益管理
  - 广告请求接口
  - 定制化用户划分
- 数据高速公路
- 离线数据处理
  - 用户会话日志生成
  - 行为定向
  - 上下文定向
  - 点击率建模
  - 分配计划
  - 商业智能
  - 广告管理系统：客户与广告系统的接口
- 在线数据处理
  - 在线反作弊
  - 计费
  - 在线行为反馈
  - 实时索引



###### 关键技术

![广告关键技术](img/广告关键技术.png)

Nginx： web服务器

ZooKeeper：分布式配置和集群管理工具 

Lucene：全文检索引擎

Thrift：跨语言通信接口

Flume：数据告诉公路

Hadoop：分布式数据处理平台

Redis：特征在线缓存

Storm：流计算平台

Spark：高校迭代计算框架。在Hadop基础上，增强了运算性能（内存运算）。但由于大数据的基础存储仍依赖Hadoop，所以还不能取而代之，Spark能够和Hadoop共享存储功能和计算资源。